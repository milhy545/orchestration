global:
  scrape_interval: 15s
  evaluation_interval: 15s
  external_labels:
    cluster: 'mcp-orchestration'
    environment: 'production'

# Alertmanager configuration (optional, can add later)
# alerting:
#   alertmanagers:
#     - static_configs:
#         - targets: ['alertmanager:9093']

# Scrape configurations
scrape_configs:
  # Prometheus self-monitoring
  - job_name: 'prometheus'
    static_configs:
      - targets: ['localhost:9090']

  # ZEN Coordinator - Master Controller
  - job_name: 'mega-orchestrator'
    static_configs:
      - targets: ['mega-orchestrator:7000']
        labels:
          service: 'mega-orchestrator'
          type: 'orchestrator'

  # Core MCP Services (7001-7010)
  - job_name: 'mcp-core-services'
    static_configs:
      - targets:
          - 'filesystem-mcp:8000'
          - 'git-mcp:8000'
          - 'terminal-mcp:8000'
          - 'database-mcp:8000'
          - 'memory-mcp:8000'
          - 'network-mcp:8000'
          - 'system-mcp:8000'
          - 'security-mcp:8000'
          - 'config-mcp:8000'
          - 'log-mcp:8000'
        labels:
          service_group: 'core'
    relabel_configs:
      - source_labels: [__address__]
        regex: '([^:]+):.*'
        target_label: service
        replacement: '${1}'

  # AI/Enhanced Services (7011-7017)
  - job_name: 'mcp-ai-services'
    static_configs:
      - targets:
          - 'research-mcp:8000'
          - 'advanced-memory-mcp:8000'
          - 'transcriber-mcp:8000'
        labels:
          service_group: 'ai'
    relabel_configs:
      - source_labels: [__address__]
        regex: '([^:]+):.*'
        target_label: service
        replacement: '${1}'

  # Database Wrappers (7024-7026)
  - job_name: 'mcp-db-wrappers'
    static_configs:
      - targets:
          - 'postgresql-mcp-wrapper:8000'
          - 'redis-mcp-wrapper:8000'
          - 'qdrant-mcp-wrapper:8000'
        labels:
          service_group: 'database-wrappers'
    relabel_configs:
      - source_labels: [__address__]
        regex: '([^:]+):.*'
        target_label: service
        replacement: '${1}'

  # MQTT Services
  - job_name: 'mcp-mqtt'
    static_configs:
      - targets: ['mqtt-mcp:8000']
        labels:
          service: 'mqtt-mcp'
          type: 'messaging'

  # Infrastructure Services
  - job_name: 'infrastructure'
    static_configs:
      - targets:
          - 'postgresql:5432'
          - 'redis:6379'
          - 'qdrant-vector:6333'
        labels:
          service_group: 'infrastructure'
    relabel_configs:
      - source_labels: [__address__]
        regex: '([^:]+):.*'
        target_label: service
        replacement: '${1}'

  # MQTT Broker (if we add exporter)
  # - job_name: 'mqtt-broker'
  #   static_configs:
  #     - targets: ['mqtt-exporter:9234']
  #       labels:
  #         service: 'mqtt-broker'

  # Loki for log aggregation
  - job_name: 'loki'
    static_configs:
      - targets: ['loki:3100']
        labels:
          service: 'loki'
          type: 'logging'
